---
layout: post
title: "各种攻击原理以及防御方法"
date: 2018-05-13 20:00:00
author: "Johan Niu"
header-img : "img/post-bg-os-metro.jpg"
tags:
    - 攻击工具
    - 安全
    - 学习
       
---

# 各种攻击原理以及防御方法

## 1 SQL注入

### 1.1 定义

把SQL命令插入到Web表单提交、输入域名、页面请求的查询字符串（注入本质上就是把输入的字符串变成可执行的程序语句），最终达到欺骗服务器执行恶意的SQL命令。

具体来说，它是利用现有应用程序，将（恶意的）SQL命令注入到后台数据库引擎执行的能力，它可以通过在Web表单中输入（恶意）SQL语句得到一个存在安全漏洞的网站上的数据库，而不是按照设计者意图去执行SQL语句。

在Web应用漏洞中，SQL Injection 漏洞的风险要高过其他所有的漏洞。

## 1.2 实例
见博客：

[http://johan.vip/2018/05/06/use_sqlmap/](使用SQLMAP进行SQL注入实战)

### 1.3 防御

* 对用户的输入进行校验，可以通过正则表达式，或限制长度；对单引号和双"-"进行转换等。
* 不要使用动态拼装SQL，可以使用参数化的SQL或者直接使用存储过程进行数据查询存取。
* 不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。
* 不要把机密信息直接存放，加密或者hash掉密码和敏感的信息。

## 2 XSS

### 2.1 定义

XSS 全称(Cross Site Scripting) 跨站脚本攻击， 是Web程序中最常见的漏洞。

指攻击者在网页中嵌入客户端脚本(例如JavaScript), 当用户浏览此网页时，脚本就会在用户的浏览器上执行，从而达到攻击者的目的。

属于一种注入攻击，注入本质上就是把输入的数据变成可执行的程序语句，比如这些代码包括HTML代码和客户端脚本。

### 2.2 危害

* 获取cookie，盗取各类用户帐号，如机器登录帐号、用户网银帐号、各类管理员帐号
* 导航到恶意网站,携带木马等。
* 控制企业数据，包括读取、篡改、添加、删除企业敏感数据的能力
* 盗窃企业重要的具有商业价值的资料，非法转账等

### 2.3 分类
#### 2.3.1 反射型xss攻击

反射型XSS，又称非持久型XSS。

之所以称为反射型XSS，则是因为这种攻击方式的注入代码是从目标服务器通过错误信息、搜索结果等等方式“反射”回来的。

而称为非持久型XSS，则是因为这种攻击方式具有一次性。

攻击者通过电子邮件等方式将包含注入脚本的恶意链接发送给受害者，当受害者点击该链接时，注入脚本被传输到目标服务器上，然后服务器将注入脚本“反射”到受害者的浏览器上，从而在该浏览器上执行了这段脚本。

比如攻击者将如下链接发送给受害者：

http://www.targetserver.com/search.asp?input=<script>alert("Hello,XSS!");</script>

当受害者点击这个链接的时候，注入的脚本被当作搜索的关键词发送到目标服务器的search.asp页面中，则在搜索结果的返回页面中，这段脚本将被当作搜索的关键词而嵌入。这样，当用户得到搜索结果页面后，这段脚本也得到了执行。这就是反射型XSS攻击的原理，可以看到，攻击者巧妙地通过反射型XSS的攻击方式，达到了在受害者的浏览器上执行脚本的目的。

由于代码注入的是一个动态产生的页面而不是永久的页面，因此这种攻击方式只在点击链接的时候才产生作用，这也是它被称为非持久型XSS的原因


#### 2.3.2 存储型xss攻击

存储型XSS，又称持久型XSS，他和反射型XSS最大的不同就是，攻击脚本将被永久地存放在目标服务器的数据库和文件中。这种攻击多见于论坛，攻击者在发帖的过程中，将恶意脚本连同正常信息一起注入到帖子的内容之中。随着帖子被论坛服务器存储下来，恶意脚本也永久地被存放在论坛服务器的后端存储器中。当其它用户浏览这个被注入了恶意脚本的帖子的时候，恶意脚本则会在他们的浏览器中得到执行，从而受到了攻击。

### 2.4 防御

* 字符过滤：对用户的请求无论是url还是表单提交的内容都进行长度检查和对特殊字符进行过滤
* cookie方面：避免在cookie中放入重要敏感信息
* 表单提交：尽量使用post的方式提交表单而不是get方式

## 3 CSRF


## 4 ARP

### 4.1 原理

### 4.2 分类

劫持

### 4.1 防御


## 5 DDOS

### 5.2 分类

* 死亡之ping（ping of death）
* 泪滴（teardrop）
* UDP洪水（UDP flood）
* SYN洪水（SYN flood）
* Land攻击
* Smurf攻击
* 放大攻击 DNS协议 NTP协议

## 6 缓冲区溢出

## 7 端口扫描

常用端口扫描工具以及使用

## 7 APT



参考链接：

[http://djangobook.py3k.cn/2.0/chapter20/]()